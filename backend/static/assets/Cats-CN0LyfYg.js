import{j as e,L as o,u as h,r as g}from"./index-CkCXjceP.js";import{u as p}from"./useQuery-HUOUZQYF.js";function f({query:s,setQuery:t}){return e.jsx("div",{className:"search-wrapper",children:e.jsx("input",{type:"text",className:"search-input",placeholder:"Search for a cat...",value:s,onChange:r=>t(r.target.value)})})}function x({cat:s,delay:t=0}){return e.jsxs(o,{to:`/cats/${s.slug}`,className:`cat-card fade-in ${s.graduated?"graduated":""}`,style:{animationDelay:`${t}ms`},children:[e.jsx("img",{src:`http://localhost:5000${s.image}`,alt:s.slug}),e.jsx("div",{className:"overlay",children:s.name})]})}function j({loc:s,group:t}){const r=s.toLowerCase().replace(/[^a-z0-9]/g,"-");return e.jsxs("div",{className:`location-group themed-group themed-${r}`,children:[e.jsx("h3",{children:s}),e.jsx("div",{className:"cat-grid",children:t.map((a,c)=>e.jsx(x,{cat:a,delay:c*100},a.slug))})]})}function y(s){return s.reduce((t,r)=>{const a=r.location.toLowerCase(),c=a.includes("utown")?"UTown":a.includes("engineering")?"Engineering":a.includes("computing")||a.includes("biz")?"Computing / Biz":a.includes("science")?"Science":a.includes("arts")||a.includes("fass")?"Arts":a.includes("temasek")?"Temasek":a.includes("raffles")?"Raffles":"Others";return t[c]||(t[c]=[]),t[c].push(r),t},{})}function w(){const{lastPredictedCat:s}=h(),[t,r]=g.useState(""),{data:a=[],isLoading:c,isError:d}=p({queryKey:["cats"],queryFn:async()=>{const n=await fetch("http://localhost:5000/api/cats");if(!n.ok)throw new Error("Failed to fetch cats");return n.json()},retry:1,staleTime:1e3*60*10}),i=a.filter(n=>n.name.toLowerCase().includes(t.toLowerCase())),u=y(i),m=["UTown","Engineering","Computing / Biz","Science","Arts","Temasek","Raffles","Others"];return c?e.jsx("div",{className:"status-wrapper",children:e.jsx("div",{className:"status-message loading",children:"🐾 Fetching cats from campus..."})}):d?e.jsx("div",{className:"status-wrapper",children:e.jsx("div",{className:"status-message error",children:"❌ Unable to load cat data. Please check your connection or try again later."})}):e.jsxs("div",{className:"main-box text-center",children:[s&&s.name.toLowerCase()!=="not a cat"&&e.jsxs("div",{className:"recent-wrapper fade-in",style:{animationDelay:"0ms"},children:[e.jsx("h2",{className:"heading",children:"Recently Predicted"}),e.jsxs(o,{to:`/cats/${s.slug}`,className:"recent-predicted",children:[e.jsx("img",{src:`http://localhost:5000/static/cats/${s.slug}.png`,alt:s.name}),e.jsx("div",{className:"overlay",children:s.name})]})]}),e.jsx(f,{query:t,setQuery:r}),i.length===0?e.jsx("div",{className:"status-wrapper",children:e.jsx("div",{className:"status-message error",children:"😿 No cats found matching that name."})}):m.map(n=>{const l=u[n];return l?e.jsx(j,{loc:n,group:l},n):null})]})}export{w as default};
