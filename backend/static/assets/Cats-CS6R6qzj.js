import{j as e,L as o,u as g,r as p}from"./index-C43qB7ox.js";import{u as f}from"./useQuery-DHNdc9z1.js";function x({query:s,setQuery:t}){return e.jsx("div",{className:"search-wrapper",children:e.jsx("input",{type:"text",className:"search-input",placeholder:"Search for a cat...",value:s,onChange:r=>t(r.target.value)})})}function j({cat:s,delay:t=0}){return e.jsxs(o,{to:`/cats/${s.slug}`,className:`cat-card fade-in ${s.graduated?"graduated":""}`,style:{animationDelay:`${t}ms`},children:[e.jsx("img",{src:`https://nus-cat-classifier.onrender.com${s.image}`,alt:s.slug}),e.jsx("div",{className:"overlay",children:s.name})]})}function y({loc:s,group:t}){const r=s.toLowerCase().replace(/[^a-z0-9]/g,"-");return e.jsxs("div",{className:`location-group themed-group themed-${r}`,children:[e.jsx("h3",{children:s}),e.jsx("div",{className:"cat-grid",children:t.map((a,c)=>e.jsx(j,{cat:a,delay:c*100},a.slug))})]})}function N(s){return s.reduce((t,r)=>{const a=r.location.toLowerCase(),c=a.includes("utown")?"UTown":a.includes("engineering")||a.includes("e1")||a.includes("ew2")||a.includes("ea")?"Engineering":a.includes("computing")||a.includes("biz")?"Computing / Biz":a.includes("science")?"Science":a.includes("arts")||a.includes("fass")?"Arts":a.includes("temasek")?"Temasek":a.includes("raffles")?"Raffles":"Others";return t[c]||(t[c]=[]),t[c].push(r),t},{})}function C(){const{lastPredictedCat:s}=g(),[t,r]=p.useState(""),a="https://nus-cat-classifier.onrender.com",{data:c=[],isLoading:d,isError:u}=f({queryKey:["cats"],queryFn:async()=>{const n=await fetch(`${a}/api/cats`);if(!n.ok)throw new Error("Failed to fetch cats");return n.json()},retry:1,staleTime:1e3*60*10}),i=c.filter(n=>n.name.toLowerCase().includes(t.toLowerCase())),m=N(i),h=["UTown","Engineering","Computing / Biz","Science","Arts","Temasek","Raffles","Others"];return d?e.jsx("div",{className:"status-wrapper",children:e.jsx("div",{className:"status-message loading",children:"ðŸ¾ Fetching cats from campus..."})}):u?e.jsx("div",{className:"status-wrapper",children:e.jsx("div",{className:"status-message error",children:"âŒ Unable to load cat data. Please check your connection or try again later."})}):e.jsxs("div",{className:"main-box text-center",children:[s&&s.name.toLowerCase()!=="not a cat"&&e.jsxs("div",{className:"recent-wrapper fade-in",style:{animationDelay:"0ms"},children:[e.jsx("h2",{className:"heading",children:"Recently Predicted"}),e.jsxs(o,{to:`/cats/${s.slug}`,className:"recent-predicted",children:[e.jsx("img",{src:`${a}/static/cats/${s.slug}.png`,alt:s.name}),e.jsx("div",{className:"overlay",children:s.name})]})]}),e.jsx(x,{query:t,setQuery:r}),i.length===0?e.jsx("div",{className:"status-wrapper",children:e.jsx("div",{className:"status-message error",children:"ðŸ˜¿ No cats found matching that name."})}):h.map(n=>{const l=m[n];return l?e.jsx(y,{loc:n,group:l},n):null})]})}export{C as default};
