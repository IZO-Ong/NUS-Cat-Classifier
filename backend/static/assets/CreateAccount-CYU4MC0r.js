import{r as s,v as P,j as t}from"./index-CkCXjceP.js";import{P as x}from"./Login-BDrtMEj6.js";function b(){const[a,i]=s.useState(""),[r,c]=s.useState(""),[l,u]=s.useState(""),[d,n]=s.useState(null),[m,g]=s.useState(null),[S,h]=s.useState(!1),[w,y]=s.useState(null),f=P();s.useEffect(()=>{(localStorage.getItem("username")||sessionStorage.getItem("username"))&&f("/")},[]),s.useEffect(()=>{if(!a)return;h(!0);const e=setTimeout(async()=>{const C=(await(await fetch("http://localhost:5000/api/users")).json()).some(N=>N.username===a);y(!C),h(!1)},400);return()=>clearTimeout(e)},[a]);function p(e){return e.length<6?"weak":e.match(/[0-9]/)&&e.match(/[A-Z]/)&&e.length>=8?"strong":"medium"}const v=async e=>{if(e.preventDefault(),n(null),g(null),r!==l){n("Passwords do not match");return}try{const o=await fetch("http://localhost:5000/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:r})}),j=await o.json();o.ok?(g("Account created successfully. Redirecting to login..."),i(""),c(""),u(""),setTimeout(()=>f("/login"),2e3)):n(j.error||"Signup failed")}catch{n("Network error. Please try again later.")}};return t.jsxs("form",{className:"login-form",onSubmit:v,children:[t.jsx("input",{type:"text",placeholder:"Username",value:a,onChange:e=>i(e.target.value),required:!0}),a&&t.jsx("div",{className:"username-status",children:S?"Checking availability...":w?"✅ Available":"❌ Taken"}),t.jsx(x,{value:r,onChange:e=>c(e.target.value),placeholder:"Password",required:!0}),r&&t.jsxs("div",{className:`password-strength ${p(r)}`,children:["Strength: ",p(r)]}),t.jsx(x,{value:l,onChange:e=>u(e.target.value),placeholder:"Confirm Password",required:!0,onKeyDown:e=>{(e.metaKey||e.ctrlKey)&&e.key==="Enter"&&v(e)}}),t.jsx("button",{type:"submit",children:"Create Account"}),d&&t.jsx("div",{className:"status-wrapper",children:t.jsx("div",{className:"status-message error",children:d})}),m&&t.jsx("div",{className:"status-wrapper",children:t.jsx("div",{className:"status-message loading",children:m})})]})}function E(){return t.jsxs("div",{className:"login-wrapper",children:[t.jsx("h2",{children:"Create Account"}),t.jsx(b,{})]})}export{E as default};
